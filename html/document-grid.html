<link rel="import" href="../core-animated-pages/core-animated-pages.html">
<link rel="import" href="../paper-ripple/paper-ripple.html">
<polymer-element name="document-grid" attributes="items,ga,toast">
  <template>
  <style>
    .itemText
      {
        padding:16px 0px 0px 8px;
      }
      .itemName
      {
        padding:0px 16px 0px 8px;
        font-weight:bold;
      }
      .itemExperience
      {
        padding:0px 16px 0px 8px;
      }
      .itemUrl
      {
        padding:0px 16px 0px 8px;
      }
      .core_card_small{
        border-top-left-radius: 2px;
        border-top-right-radius: 2px;
        border-bottom-right-radius: 2px;
        border-bottom-left-radius: 2px;
        box-shadow: rgba(0, 0, 0, 0.0980392) 0px 2px 4px, rgba(0, 0, 0, 0.0980392) 0px 0px 3px;
        margin: 8px;
        padding: 16px;
        background-color: rgb(255, 255, 255);
        width:100px;
      }
      .page
      {
        position:relative !important;
      }
      .ripple
      {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
  </style>
  <paper-toast id="docToast" text="Popups must be allowed in order to open documents"></paper-toast>
              <div class="page" horizontal layout wrap around-justified start layout on-tap="{{openDocument}}">
                <template repeat="{{i in items}}">
                  <core-card class="core_card_small page" vertical layout>
                    <img src="{{i.image}}" width="100px"/>
                    <div class="itenName">{{i.name}}</div>
                    <paper-ripple class="ripple"></paper-ripple>
                  </core-card>
                </template>
              </div>
  </template>
<script>
  Polymer('document-grid', {
    items: [],
    ga: function(){},
    toast: '',
    openDocument: function(event)
    {
      if(event.target.templateInstance.model.i)
      {
        var win = window.open(event.target.templateInstance.model.i.url, '_blank');
        this.ga('send', 'event', 'DocumentOpen', event.target.templateInstance.model.i.name);
        if(win)
        {
          win.focus();
        }
        else
        {
          this.$.docToast.show();
          this.ga('send', 'event', 'BadUX', 'PopupBlocked','OpenDocument');
        }
      }
    }
  });
</script>
</polymer-element>